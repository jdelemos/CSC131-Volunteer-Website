<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel = "stylesheet" href = "styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="userpopout.js" defer></script>
    <script src="login.js" defer></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        handleLoginState();
    });
</head>
<title>Admin</title>
<style>
    .circle1 {
        width: calc(64px*var(--scaling-factor));
        height: calc(64px*var(--scaling-factor));
        border-radius: 50%;
        background-color: #c4B581;
        display: flex;
        justify-content: center;
        align-items: center;
        transform:translate(calc(30px*var(--scaling-factor)),calc(30px*var(--scaling-factor)));
        cursor: pointer;
        transition: background-color 0.3s;
    }
    .circle1:hover{
        background-color: #776A3F;
    }
    
    
    
    .list-item {
        position: relative;
        box-sizing: border-box;
        padding: calc(15px*var(--scaling-factor));
        border-radius: calc(0*var(--scaling-factor));
        margin-bottom: calc(15px*var(--scaling-factor));
        margin-top: calc(15px*var(--scaling-factor));
        background-color: rgba(46, 40, 40, 0.7);
    }
    
    .buttons-container {
        position: absolute;
        top: 50%;
        right: calc(15px*var(--scaling-factor));
        transform: translateY(-50%);
        display: flex;
        flex-direction: column; /* Stack buttons vertically */
        gap: calc(10px*var(--scaling-factor));
    }
    
    
    
            /* Add styles for the button */
            #mybutton {
                margin-top: calc(100px*var(--scaling-factor));
                margin-left:45%;  
                text-align: center;
            }
    
          
            ul {
            list-style-position: inside;
            flex-wrap: wrap;
            position: center;
            display: flex;
            margin-left: calc(10px*var(--scaling-factor));
            margin-top: calc(15px*var(--scaling-factor));
            margin-right: calc(10px*var(--scaling-factor));
            margin: 0 auto; 
            text-align: center;
            columns:3;
        
            }
    
            li {
                
                flex: 0 0 calc(92% - calc(20px*var(--scaling-factor)));  
                display: inline;
                border-radius: calc(15px*var(--scaling-factor)); 
                margin-bottom: calc(15px*var(--scaling-factor));
                margin-left: calc(10px*var(--scaling-factor)); 
                margin-right: calc(15px*var(--scaling-factor)); 
                background-color: rgba(46, 40, 40, 0.7);
                color: white; 
                
            
               
            }
</style>
<body>
     <header class="header">

        <div class="logo"><img src="images/image3.png" alt=""></div>   
        <a href="apply"><h1 class="title">Applyy</h1> </a>
        <a href="contact"><h1 class="title">Contact Us</h1></a>
        <a href="event"><h1 class="title">events</h1></a>
         <a href="adminsee.html"><h1 class="title">Admin</h1></a>

        <h1 class="title hidden" id="update" display="none">Update Information</h1>
        <h1 class="title hidden" id="signout"display="none" onclick="signOut()">Sign Out</h1>

        <div class="circle" id="userButton" onclick="checkbutton()">
            <div class="login-icon">
                <img src="images/user.png" alt="Login">
            </div>
        </div>
    </header>
    <h1><br><br></h1>
        <div id="output-container">
            <!-- Content will be printed here -->
        </div>
    <script>
        var screenWidth = window.screen.width;
            var baseResolutionWidth = 1920;
            var scalingFactor = screenWidth / baseResolutionWidth;
            document.documentElement.style.setProperty('--scaling-factor', scalingFactor);
    </script>
    <script>
            window.onload=fetchData(); 
            async function fetchData() {
  try {
    const response = await fetch('https://vast-wave-12355-e83778ef23ea.herokuapp.com/data');
    
    // Check if the response is not successful (status code in the range 200-299)
    if (!response.ok) {
      throw new Error(`Error: ${response.status} - ${response.statusText}`);
    }

    const contentType = response.headers.get('content-type');
    
    // Check if the response is JSON
    if (contentType && contentType.includes('application/json')) {
      const data = await response.json();
      displayData(data);
    } else {
      throw new Error('Unexpected response format: Not JSON');
    }
  } catch (error) {
    console.error('Error fetching data:', error);
  }
}




            
        function displayData(data) {
            const dataContainer = document.getElementById('data-container');

            if (data.length === 0) {
                dataContainer.innerHTML += '<p>No data available.</p>';
                console.log("hi")
            } else {
                var htmlContent =''
                data.forEach(item => {
                    htmlContent = 
                    `<div class="event-rectangle">\n
                        <p class="event-name"> <b> Event:<b> `+item.eventName+`</p>\n
                    </div>\n`
                    +htmlContent;

        })
        // Get the container element
        const outputContainer = document.getElementById('output-container');

// Set the HTML content of the container
        outputContainer.innerHTML = htmlContent;
    }
}
        
    </script> 
    </div>
</body>
    <script>
        let params = {}
        let regex = /([^&=]+)=([^&]*)/g, m
        while(m = regex.exec(location.href)){
            params[decodeURIComponent(m[1])]=decodeURIComponent(m[2])
        }
        if(Object.keys(params).length > 0){
            localStorage.setItem('authInfo', JSON.stringify(params))
        }
        // hide the access token
        window.history.pushState({},document.title,"/"+"apply")
    </script>
    <script src="scalingfactor.js"></script>
</html>
