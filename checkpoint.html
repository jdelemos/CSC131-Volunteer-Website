 event.preventDefault();

    // Retrieve the data-event-id attribute from the clicked element
    const eventId = event.target.getAttribute('data-event-id');

    if (!eventId) {
      throw new Error('Data-event-id attribute is undefined or null.');
    }

    // Check if the image is already applied
    const applyBox = event.target;
    if (applyBox.classList.contains('applied')) {
      // If already applied, do nothing
      return;
    }

    const formData = {
      userId: localStorage.getItem('googleId'),
      EventId: eventId,
        status: null,
    };
       response = await fetch(`https://vast-wave-12355-e83778ef23ea.herokuapp.com/user-check?userId=${userId}`);
            if (!response.ok) {
                throw new Error(`Error: ${response.status} - ${response.statusText}`);
            }
            let existingUserStatus = await response.json();
            if (existingUserStatus.isUser === true) {
                console.log('Existing User');
                //window.location.href = 'apply.html';
            } else {
                console.log('New User');
               //window.location.href = 'userinfo.html';
            }

    fetch('https://vast-wave-12355-e83778ef23ea.herokuapp.com/apply', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(formData),
    })
      .then(response => response.text())
      .then(data => {
        console.log('Success:', data);

        // Change the image source to the "applied" image
        applyBox.innerHTML = 'Applied';  // Assuming you have an image text or an applied message
        applyBox.classList.add('applied');  // Add a class to mark it as applied
        applyBox.style.pointerEvents = 'none';  // Disable click events

        alert('Data submitted successfully!');
      })
      .catch((error) => {
        console.error('Error fetching data:', error.message);
        alert('Error submitting data');
      });
